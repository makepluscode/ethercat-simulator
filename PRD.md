# Product Requirements Document (PRD)
## KickCAT - EtherCAT Master Library & Simulation Environment

### Document Information
- **Project Name**: KickCAT EtherCAT Master Library
- **Version**: 1.0
- **Date**: December 2024
- **Document Type**: Product Requirements Document

---

## 1. Executive Summary

KickCAT is a comprehensive EtherCAT master library designed for real-time communication with EtherCAT slave devices. The project provides both simulation capabilities for development and testing, as well as real hardware support for production environments. The library follows IEC 61158-4-12 standard and implements a complete EtherCAT master functionality with virtual network simulation capabilities.

### Key Value Propositions
- **Development Efficiency**: Virtual simulation environment eliminates need for physical hardware during development
- **Real-time Performance**: Designed for industrial real-time applications with 1ms cycle time support
- **Linux Focus**: Optimized for Linux (WSL) development environment
- **Easy Integration**: Download KickCAT library via Conan package manager for seamless CMake project integration
- **Scalable Architecture**: Progressive deployment from single executable to distributed device architecture

---

## 2. Product Overview

### 2.1 Product Vision
To provide a robust, efficient, and easy-to-use EtherCAT master library that enables developers to build real-time industrial automation applications with comprehensive simulation capabilities for development and testing.

### 2.2 Target Users
- **Industrial Automation Engineers**: Building EtherCAT-based control systems
- **Embedded Systems Developers**: Implementing EtherCAT communication protocols
- **Research and Development Teams**: Prototyping and testing EtherCAT applications
- **Educational Institutions**: Teaching industrial communication protocols

### 2.3 Product Goals
- Enable rapid development of EtherCAT applications through simulation
- Provide production-ready EtherCAT master implementation
- Ensure real-time performance for industrial applications
- Simplify integration with existing CMake-based projects via Conan package download
- Support progressive deployment architecture from single executable to distributed devices
- Optimize for Linux (WSL) development environment

---

## 3. Functional Requirements

### 3.1 EtherCAT Master Implementation

#### 3.1.1 Core Master Functionality
- **REQ-001**: Implement complete EtherCAT master following IEC 61158-4-12 standard
- **REQ-002**: Support EtherCAT frame structure with proper header and payload handling
- **REQ-003**: Provide real-time cyclic data exchange capabilities
- **REQ-004**: Implement slave discovery and configuration management
- **REQ-005**: Support Process Data Object (PDO) mapping and exchange

#### 3.1.2 Master State Management
- **REQ-006**: Track initialization state (uninitialized, initialized, cyclic operation)
- **REQ-007**: Provide graceful startup and shutdown procedures
- **REQ-008**: Implement error recovery mechanisms
- **REQ-009**: Support hot-plugging of slave devices

### 3.2 Network Interface Abstraction

#### 3.2.1 Abstract Network Layer
- **REQ-010**: Provide abstract network interface for hardware independence
- **REQ-011**: Support both real hardware and simulation environments
- **REQ-012**: Implement frame-based communication with configurable timeouts
- **REQ-013**: Ensure thread-safe network operations

#### 3.2.2 Network Operations
- **REQ-014**: Support frame transmission with error detection
- **REQ-015**: Implement frame reception with timeout handling
- **REQ-016**: Provide network initialization and cleanup procedures
- **REQ-017**: Support multiple network interfaces

### 3.3 Simulation Environment

#### 3.3.1 Network Simulator (`NetworkSimulator`)
- **REQ-018**: Implement virtual network environment for testing
- **REQ-019**: Provide thread-safe frame queue with mutex protection
- **REQ-020**: Simulate realistic transmission delays (100Î¼s default)
- **REQ-021**: Support command processing (read/write operations)
- **REQ-022**: Implement slave registry management
- **REQ-023**: Handle EtherCAT commands (0x02=read, 0x03=write)

#### 3.3.2 Virtual Slave (`VirtualSlave`)
- **REQ-024**: Simulate EtherCAT slave device behavior
- **REQ-025**: Support configurable vendor ID, product code, and address
- **REQ-026**: Implement process data simulation with input/output mapping
- **REQ-027**: Provide simple data processing algorithms
- **REQ-028**: Track slave state (online/offline)
- **REQ-029**: Support multiple virtual slaves in single network

#### 3.3.3 Elmo Motor Slave (`ElmoMotorSlave`)
- **REQ-030**: Implement Elmo motor-specific EtherCAT slave behavior
- **REQ-031**: Leverage existing Elmo motor control code
- **REQ-032**: Support Elmo motor parameters (position, velocity, torque)
- **REQ-033**: Implement Elmo-specific PDO mapping
- **REQ-034**: Provide realistic motor physics simulation
- **REQ-035**: Support Elmo motor state machine (enable, disable, fault states)
- **REQ-036**: Implement Elmo motor configuration and calibration
- **REQ-037**: Support multiple Elmo motors in single network

### 3.4 Real-time Capabilities

#### 3.4.1 Cyclic Operations
- **REQ-038**: Implement cyclic operation with configurable cycle times
- **REQ-039**: Support 1ms cycle times (typical EtherCAT requirement)
- **REQ-040**: Provide background thread processing
- **REQ-041**: Implement callback mechanisms for data and state changes
- **REQ-042**: Support signal handling for graceful shutdown

#### 3.4.2 Threading and Synchronization
- **REQ-043**: Use detached thread for cyclic operations
- **REQ-044**: Implement proper thread synchronization
- **REQ-045**: Prevent race conditions in shared resources
- **REQ-046**: Provide atomic operations for thread control

#### 3.4.3 Elmo Motor Real-time Control
- **REQ-047**: Support real-time motor control loops
- **REQ-048**: Implement position/velocity/torque control modes
- **REQ-049**: Provide motor feedback processing
- **REQ-050**: Support Elmo motor safety functions

### 3.5 GUI Architecture and Communication

#### 3.5.1 MVC Architecture
- **REQ-051**: Implement Model-View-Controller architecture for GUI separation
- **REQ-052**: Separate GUI from core EtherCAT functionality
- **REQ-053**: Provide modular GUI components
- **REQ-054**: Support multiple GUI frameworks (Qt, web-based)

#### 3.5.2 FastDDS Communication
- **REQ-055**: Implement FastDDS-based communication between GUI and core
- **REQ-056**: Support real-time data publishing/subscribing
- **REQ-057**: Provide topic-based messaging system
- **REQ-058**: Implement data serialization for GUI communication
- **REQ-059**: Support multiple GUI clients simultaneously

#### 3.5.3 Elmo Dashboard
- **REQ-060**: Implement Elmo motor status dashboard
- **REQ-061**: Display motor position, velocity, torque in real-time
- **REQ-062**: Show motor state (enabled/disabled, fault status)
- **REQ-063**: Provide motor control interface (position/velocity commands)
- **REQ-064**: Display network topology and slave status
- **REQ-065**: Support alarm and error message display
- **REQ-066**: Provide motor configuration interface
- **REQ-067**: Support data logging and historical data visualization

---

## 4. Technical Requirements

### 4.1 Data Structures

#### 4.1.1 EtherCATFrame Structure
```cpp
struct EtherCATFrame {
    uint16 length;        // Frame length including header
    uint8 command;        // EtherCAT command (0x02=read, 0x03=write)
    uint8 index;          // Frame index
    uint16 address;       // Slave address
    uint16 interrupt;     // Interrupt register
    uint8 data[1486];     // Maximum EtherCAT payload
    uint16 working_counter; // Working counter for error detection
    uint16 reserved;      // Reserved field
};
```

#### 4.1.2 SlaveInfo Structure
```cpp
struct SlaveInfo {
    uint16 address;       // Slave address
    uint32 vendor_id;     // Vendor identification
    uint32 product_code;  // Product code
    uint32 revision_number; // Revision number
    uint32 serial_number; // Serial number
    std::string name;     // Human-readable name
    bool online;          // Online status
};
```

#### 4.1.3 ElmoMotorInfo Structure
```cpp
struct ElmoMotorInfo {
    uint16 address;           // EtherCAT slave address
    uint32 vendor_id;         // Elmo vendor ID (0x0000009A)
    uint32 product_code;      // Elmo product code
    uint32 revision_number;   // Firmware revision
    uint32 serial_number;     // Motor serial number
    std::string motor_name;   // Motor identifier
    bool online;              // Online status
    
    // Motor parameters
    double position;          // Current position (radians)
    double velocity;          // Current velocity (rad/s)
    double torque;            // Current torque (Nm)
    uint16 status_word;       // Motor status word
    uint16 control_word;      // Motor control word
    
    // Elmo-specific parameters
    uint16 motor_type;        // Motor type identifier
    double max_velocity;     // Maximum velocity
    double max_torque;       // Maximum torque
    bool enabled;            // Motor enable status
    bool fault_detected;     // Fault status
};
```

#### 4.1.4 ElmoMotorPDO Structure
```cpp
struct ElmoMotorPDO {
    // Input PDO (from motor to master)
    uint16 status_word;      // Motor status
    int32 position_feedback; // Position feedback
    int32 velocity_feedback; // Velocity feedback
    int16 torque_feedback;   // Torque feedback
    uint16 motor_temperature; // Motor temperature
    uint16 error_code;       // Error code
    
    // Output PDO (from master to motor)
    uint16 control_word;     // Motor control
    int32 position_command;  // Position command
    int32 velocity_command;  // Velocity command
    int16 torque_command;    // Torque command
    uint16 operation_mode;   // Operation mode
    uint16 reserved;         // Reserved field
};
```

#### 4.1.5 FastDDS Communication Structures
```cpp
// Motor Status Topic
struct MotorStatusTopic {
    uint16 motor_id;         // Motor identifier
    double position;          // Current position (radians)
    double velocity;         // Current velocity (rad/s)
    double torque;           // Current torque (Nm)
    uint16 status_word;      // Motor status word
    uint16 control_word;     // Motor control word
    bool enabled;            // Motor enable status
    bool fault_detected;     // Fault status
    uint16 error_code;       // Error code
    uint16 temperature;     // Motor temperature
    uint64 timestamp;       // Timestamp (microseconds)
};

// Motor Command Topic
struct MotorCommandTopic {
    uint16 motor_id;         // Motor identifier
    double position_command;  // Position command (radians)
    double velocity_command; // Velocity command (rad/s)
    double torque_command;   // Torque command (Nm)
    uint16 control_word;     // Control word
    uint16 operation_mode;   // Operation mode
    uint64 timestamp;       // Timestamp (microseconds)
};

// Network Status Topic
struct NetworkStatusTopic {
    uint16 total_slaves;     // Total number of slaves
    uint16 online_slaves;    // Number of online slaves
    bool master_state;       // Master operational state
    uint32 cycle_time;       // Current cycle time (Î¼s)
    uint32 frame_count;      // Frame count
    uint64 timestamp;       // Timestamp (microseconds)
};
```

### 4.2 Performance Requirements

#### 4.2.1 Timing Requirements
- **REQ-051**: Support cycle times as low as 1ms
- **REQ-052**: Minimize frame transmission latency
- **REQ-053**: Support maximum EtherCAT frame size (1486 bytes)
- **REQ-054**: Implement efficient memory usage with minimal allocations

#### 4.2.2 Throughput Requirements
- **REQ-055**: Support high-frequency cyclic data exchange
- **REQ-056**: Handle multiple slaves simultaneously
- **REQ-057**: Process frames within real-time constraints

#### 4.2.3 Elmo Motor Performance Requirements
- **REQ-068**: Support 1ms motor control cycle times
- **REQ-069**: Minimize motor command latency
- **REQ-070**: Support multiple Elmo motors simultaneously
- **REQ-071**: Process motor feedback within real-time constraints

#### 4.2.4 GUI Communication Performance Requirements
- **REQ-072**: Support GUI update rates up to 100Hz
- **REQ-073**: Minimize GUI communication latency (< 10ms)
- **REQ-074**: Support multiple GUI clients (up to 10)
- **REQ-075**: Handle GUI disconnection/reconnection gracefully

### 4.3 Platform Requirements

#### 4.3.1 Programming Language
- **REQ-076**: Implement in C++17 or higher
- **REQ-077**: Use modern C++ features (RAII, smart pointers)
- **REQ-078**: Follow exception-safe design principles
- **REQ-079**: Integrate existing Elmo motor control code

#### 4.3.2 Build System
- **REQ-080**: Use CMake 3.11+ for build configuration
- **REQ-081**: Support Conan package manager integration
- **REQ-082**: Provide cross-platform build support
- **REQ-083**: Include Elmo motor libraries and dependencies
- **REQ-084**: Include FastDDS libraries and dependencies
- **REQ-085**: Include GUI framework dependencies (Qt, etc.)

#### 4.3.3 Platform Support
- **REQ-086**: Support Linux (WSL) as primary and only target platform
- **REQ-087**: Use POSIX threads (pthread) for threading
- **REQ-088**: Optimize for Linux kernel and system libraries
- **REQ-089**: Support Linux-specific real-time features

#### 4.3.4 GUI Framework Support
- **REQ-090**: Support Qt framework for Linux desktop GUI
- **REQ-091**: Support web-based GUI (HTML5/JavaScript)
- **REQ-092**: Optimize GUI for Linux environment
- **REQ-093**: Support responsive GUI design on Linux

---

## 5. Architecture Design

### 5.1 Core Architecture

#### 5.1.1 Network Interface Layer (`NetworkInterface`)
- **Purpose**: Abstract interface for network communication
- **Implementation**: Pure virtual base class defining frame-based communication
- **Key Methods**:
  - `initialize()`: Initialize network resources
  - `sendFrame()`: Send EtherCAT frame to network
  - `receiveFrame()`: Receive EtherCAT frame with timeout
  - `close()`: Clean up network resources

#### 5.1.2 Master Implementation (`Master`)
- **Purpose**: Main EtherCAT master functionality
- **Key Features**:
  - Slave lifecycle management (scan, configure, monitor)
  - Cyclic operation control with background thread
  - Process data exchange (read/write operations)
  - Callback system for data and state changes
- **Threading Model**: Uses detached thread for cyclic operations
- **State Management**: Tracks initialization and cyclic operation states

### 5.2 Simulation Components

#### 5.2.1 NetworkSimulator Implementation
- **Thread-safe Frame Queue**: Mutex-protected queue for frame handling
- **Simulated Transmission Delays**: Configurable delay simulation (100Î¼s default)
- **Command Processing**: Handle read/write operations
- **Slave Registry**: Manage virtual slave devices
- **Frame Processing**: Process EtherCAT commands

#### 5.2.2 VirtualSlave Implementation
- **Configurable Parameters**: Vendor ID, product code, address
- **Process Data Simulation**: Input/output mapping
- **Data Processing**: Simple algorithms for realistic behavior
- **State Tracking**: Online/offline status management

#### 5.2.3 ElmoMotorSlave Implementation
- **Elmo Motor Integration**: Leverage existing Elmo code for motor control
- **Motor Parameters**: Position, velocity, torque control
- **EtherCAT PDO Mapping**: Elmo-specific process data objects
- **Motor State Machine**: Elmo motor operational states
- **Realistic Motor Behavior**: Physics-based motor simulation

### 5.3 Threading and Synchronization

#### 5.3.1 Cyclic Operation Thread
- **Purpose**: Background thread for real-time data exchange
- **Implementation**: Detached thread with 1ms sleep cycle
- **Synchronization**: Uses atomic boolean for thread control
- **Error Handling**: Graceful shutdown on master destruction

#### 5.3.2 Network Simulator Threading
- **Frame Queue**: Thread-safe queue with mutex protection
- **Timeout Handling**: Configurable timeout for frame reception
- **Race Condition Prevention**: Proper locking for shared resources

### 5.4 GUI Architecture

#### 5.4.1 MVC Architecture Implementation
- **Model**: Data layer for motor status, network state, and configuration
- **View**: GUI components for displaying motor information and controls
- **Controller**: Business logic for handling user interactions and data flow
- **Separation**: Complete separation between GUI and core EtherCAT functionality

#### 5.4.2 FastDDS Communication Layer
- **Publisher**: Core system publishes motor status and network information
- **Subscriber**: GUI subscribes to motor status and publishes commands
- **Topics**: MotorStatusTopic, MotorCommandTopic, NetworkStatusTopic
- **QoS**: Reliable communication with appropriate latency settings

#### 5.4.3 Elmo Dashboard Components
- **Motor Status Panel**: Real-time display of position, velocity, torque
- **Network Topology**: Visual representation of EtherCAT network
- **Control Panel**: Motor command interface (position/velocity/torque)
- **Alarm Panel**: Error messages and fault status display
- **Configuration Panel**: Motor parameter configuration interface
- **Data Logging**: Historical data visualization and export

---

## 6. Project Structure

```
KickCAT/
âââ include/                    # Header files
â   âââ kickcat.h              # Main library header
â   âââ communication/        # FastDDS communication
â       âââ topics.h          # FastDDS topic definitions
â       âââ publisher.h        # Data publisher interface
âââ core/                       # Core source files
â   âââ master.cpp             # Master implementation
â   âââ slave.cpp              # Slave implementation
â   âââ network.cpp            # Network interface
â   âââ simulation/            # Simulation components
â   â   âââ network_simulator.cpp
â   â   âââ virtual_slave.cpp
â   âââ communication/        # FastDDS communication
â       âââ publisher.cpp      # Data publisher implementation
â       âââ subscriber.cpp     # Data subscriber implementation
â       âââ topics.cpp         # Topic implementations
âââ lib/                        # Library files
â   âââ libkickcat.a           # Static library
â   âââ libkickcat.so          # Shared library
âââ gui/                       # GUI applications
â   âââ include/              # GUI headers
â   â   âââ model.h            # MVC Model classes
â   â   âââ view.h             # MVC View classes
â   â   âââ controller.h       # MVC Controller classes
â   â   âââ dashboard.h         # Elmo dashboard components
â   âââ src/                  # GUI implementation
â   â   âââ model/             # MVC Model implementation
â   â   â   âââ motor_model.cpp
â   â   â   âââ network_model.cpp
â   â   âââ view/              # MVC View implementation
â   â   â   âââ motor_view.cpp
â   â   â   âââ dashboard_view.cpp
â   â   âââ controller/        # MVC Controller implementation
â   â   â   âââ motor_controller.cpp
â   â   â   âââ dashboard_controller.cpp
â   â   âââ dashboard/         # Elmo dashboard components
â   â       âââ motor_panel.cpp
â   â       âââ network_panel.cpp
â   â       âââ control_panel.cpp
â   âââ desktop/              # Desktop GUI (Qt)
â   â   âââ main.cpp
â   â   âââ CMakeLists.txt
â   â   âââ resources/         # GUI resources
â   âââ web/                  # Web-based GUI
â       âââ index.html
â       âââ dashboard.js
â       âââ styles.css
âââ examples/                  # Example applications
â   âââ main.cpp              # Master-slave communication example
â   âââ CMakeLists.txt
âââ cmake_example/            # CMake integration example
â   âââ main.cpp
â   âââ CMakeLists.txt
â   âââ conanfile.txt
â   âââ build_example.sh
âââ conanfile.py              # Conan package configuration
âââ CMakeLists.txt            # Main CMake configuration
âââ build_kickcat.sh          # Build script
âââ PRD.md                    # This Product Requirements Document
```

---

## 7. Error Handling and Logging

### 7.1 Error Handling Strategy
- **REQ-056**: Use boolean return values for operation success/failure
- **REQ-057**: Implement exception-safe design with RAII and smart pointers
- **REQ-058**: Provide automatic resource cleanup in destructors
- **REQ-059**: Implement proper state validation before operations

### 7.2 Logging Implementation
- **REQ-060**: Use standard C++ iostream for console output
- **REQ-061**: Provide detailed operation logging for debugging
- **REQ-062**: Implement clear error reporting with context
- **REQ-063**: Support performance monitoring (cycle time and operation timing)

---

## 8. Build System Integration

### 8.1 CMake Configuration
- **REQ-064**: Organize source files by functionality (master, network, simulation)
- **REQ-065**: Implement automatic Linux library linking
- **REQ-066**: Provide proper library and header installation
- **REQ-067**: Support configurable build options for simulation and examples
- **REQ-068**: Generate library files in lib/ directory
- **REQ-069**: Support both static and shared library builds for Linux
- **REQ-070**: Implement proper library installation to lib/ directory

### 8.2 Conan Package Distribution
- **REQ-068**: Define complete package metadata and dependencies
- **REQ-069**: Support Linux system library linking
- **REQ-070**: Provide configurable options for shared/static builds
- **REQ-071**: Implement proper source and header file export
- **REQ-072**: Provide easy download and integration via Conan
- **REQ-073**: Support automatic dependency resolution
- **REQ-074**: Include comprehensive usage examples
- **REQ-075**: Package library files in lib/ directory
- **REQ-076**: Support Linux library naming conventions

---

## 9. Testing Requirements

### 9.1 Unit Testing
- **REQ-072**: Test individual components in isolation
- **REQ-073**: Verify frame structure handling
- **REQ-074**: Test slave management functionality
- **REQ-075**: Validate network interface operations

### 9.2 Integration Testing
- **REQ-076**: Test master-slave communication
- **REQ-077**: Verify simulation environment functionality
- **REQ-078**: Test real-time performance requirements
- **REQ-079**: Validate cross-platform compatibility

### 9.3 Performance Testing
- **REQ-080**: Measure cycle time performance
- **REQ-081**: Test throughput under load
- **REQ-082**: Validate memory usage efficiency
- **REQ-083**: Test latency requirements

---

## 10. Documentation Requirements

### 10.1 API Documentation
- **REQ-084**: Provide comprehensive API documentation
- **REQ-085**: Include usage examples for all major features
- **REQ-086**: Document configuration options and parameters
- **REQ-087**: Provide troubleshooting guide

### 10.2 User Documentation
- **REQ-088**: Create getting started guide
- **REQ-089**: Provide integration examples
- **REQ-090**: Document simulation environment setup
- **REQ-091**: Include performance tuning guidelines

---

## 11. Deployment and Distribution

### 11.1 Internal Package Distribution
- **REQ-092**: Provide Conan package for internal distribution
- **REQ-093**: Support multiple build configurations
- **REQ-094**: Include Linux binaries in lib/ directory
- **REQ-095**: Provide source code distribution
- **REQ-096**: Enable easy download via Conan package manager
- **REQ-097**: Support automatic dependency management
- **REQ-098**: Provide clear installation and usage instructions
- **REQ-099**: Package library files in standardized lib/ directory structure
- **REQ-100**: Support Linux library file naming conventions

### 11.2 Conan Integration and Usage
- **REQ-101**: Support standard Conan installation procedures
- **REQ-102**: Provide CMake integration examples with Conan
- **REQ-103**: Include automatic dependency management via Conan
- **REQ-104**: Support internal development and production environments
- **REQ-105**: Provide clear Conan download and usage documentation
- **REQ-106**: Install library files to lib/ directory via Conan
- **REQ-107**: Support linking to libkickcat library files

---

## 12. Success Criteria

### 12.1 Functional Success Criteria
- â Complete EtherCAT master implementation following IEC 61158-4-12
- â Functional simulation environment with virtual slaves
- â Real-time cyclic operation with 1ms cycle time support
- â Linux (WSL) compatibility and optimization

### 12.2 Performance Success Criteria
- â Support for 1ms cycle times
- â Minimal frame transmission latency
- â Support for maximum EtherCAT frame size (1486 bytes)
- â Efficient memory usage with minimal allocations

### 12.3 Integration Success Criteria
- â Easy CMake project integration via Conan download
- â Conan package manager support for internal distribution
- â Simple library download and integration process on Linux
- â Comprehensive documentation and examples
- â Robust error handling and logging

---

## 13. Risk Assessment

### 13.1 Technical Risks
- **Real-time Performance**: Ensuring deterministic timing in simulation
- **Cross-platform Compatibility**: Managing platform-specific differences
- **Threading Complexity**: Avoiding race conditions and deadlocks

### 13.2 Mitigation Strategies
- Comprehensive testing on all target platforms
- Careful thread synchronization design
- Performance profiling and optimization
- Extensive documentation and examples

---

## 14. Development Phases

### 14.1 Phase 1: Core Foundation
**ëª©í**: ê¸°ë³¸ EtherCAT ë§ì¤í° ë¼ì´ë¸ë¬ë¦¬ êµ¬ì¡° êµ¬ì¶

#### Phase 1 Requirements
- **REQ-001 to REQ-009**: EtherCAT Master ê¸°ë³¸ êµ¬í
- **REQ-010 to REQ-017**: Network Interface ì¶ìí
- **REQ-046 to REQ-055**: íë«í¼ ë° ë¹ë ìì¤í ì¤ì 
- **REQ-056 to REQ-063**: ê¸°ë³¸ ìë¬ ì²ë¦¬ ë° ë¡ê¹

#### Phase 1 Deliverables
- â ê¸°ë³¸ EtherCAT íë ì êµ¬ì¡° êµ¬í
- â NetworkInterface ì¶ì í´ëì¤
- â Master í´ëì¤ ê¸°ë³¸ êµ¬ì¡°
- â CMake ë¹ë ìì¤í
- â ê¸°ë³¸ ë¡ê¹ ìì¤í

#### Phase 1 Success Criteria
- ë¼ì´ë¸ë¬ë¦¬ê° ì»´íì¼ëê³  ë§í¬ë¨
- ê¸°ë³¸ íë ì êµ¬ì¡°ê° ì ìë¨
- ë¤í¸ìí¬ ì¸í°íì´ì¤ ì¶ìí ìë£

### 14.2 Phase 2: Simulation Environment
**ëª©í**: ê°ì ë¤í¸ìí¬ ìë®¬ë ì´í° ë° Elmo Motor ì¬ë ì´ë¸ êµ¬í

#### Phase 2 Requirements
- **REQ-018 to REQ-037**: ìë®¬ë ì´ì íê²½ ë° Elmo Motor êµ¬í
- **REQ-072 to REQ-075**: ê¸°ë³¸ ë¨ì íì¤í¸

#### Phase 2 Deliverables
- â NetworkSimulator í´ëì¤ êµ¬í
- â VirtualSlave í´ëì¤ êµ¬í
- â ElmoMotorSlave í´ëì¤ êµ¬í
- â ì¤ë ë ìì  íë ì í
- â ê°ì ì¬ë ì´ë¸ ë±ë¡ ê´ë¦¬
- â Elmo Motor PDO ë§¤í
- â ê¸°ë³¸ ë¨ì íì¤í¸

#### Phase 2 Success Criteria
- ê°ì ë¤í¸ìí¬ìì íë ì ì ì¡/ìì  ê°ë¥
- ì¬ë¬ ê°ì ì¬ë ì´ë¸ ëì ìë®¬ë ì´ì
- Elmo Motor ì¬ë ì´ë¸ ìë®¬ë ì´ì
- ê¸°ë³¸ EtherCAT ëªë ¹ì´ ì²ë¦¬ (0x02, 0x03)
- Elmo Motor ì ì´ ëªë ¹ ì²ë¦¬

### 14.3 Phase 3: Real-time Operations
**ëª©í**: ì¤ìê° ì¬ì´í´ë¦­ ì´ì ë° Elmo Motor ì ì´ êµ¬í

#### Phase 3 Requirements
- **REQ-038 to REQ-050**: ì¤ìê° ê¸°ë¥ ë° Elmo Motor ì ì´ êµ¬í
- **REQ-076 to REQ-079**: íµí© íì¤í¸

#### Phase 3 Deliverables
- â ì¬ì´í´ë¦­ ì´ì ì¤ë ë êµ¬í
- â 1ms ì¬ì´í´ íì ì§ì
- â Elmo Motor ì¤ìê° ì ì´
- â ì½ë°± ë©ì»¤ëì¦
- â ìê·¸ë í¸ë¤ë§
- â íµí© íì¤í¸ ì¤ìí¸

#### Phase 3 Success Criteria
- 1ms ì¬ì´í´ íì ë¬ì±
- ìì ì ì¸ ì¤ìê° ë°ì´í° êµí
- Elmo Motor ì¤ìê° ì ì´ ì±ê³µ
- ì°ìí ì¢ë£ ì²ë¦¬

### 14.4 Phase 4: Advanced Features
**ëª©í**: ê³ ê¸ ê¸°ë¥, Elmo Motor ìµì í ë° ì±ë¥ íë

#### Phase 4 Requirements
- **REQ-080 to REQ-093**: ë¹ë ìì¤í ê³ ëí
- **REQ-080 to REQ-083**: ì±ë¥ íì¤í¸
- **REQ-084 to REQ-091**: ë¬¸ìí
- **REQ-068 to REQ-071**: Elmo Motor ì±ë¥ ìµì í

#### Phase 4 Deliverables
- â Conan í¨í¤ì§ ì§ì (ì¬ë´ ë°°í¬ì©)
- â í¬ë¡ì¤ íë«í¼ ë¹ë
- â Elmo Motor ì±ë¥ ìµì í
- â API ë¬¸ìí
- â Conan ë¤ì´ë¡ë ë° ì¬ì© ê°ì´ë
- â Elmo Motor ì¬ì©ì ê°ì´ë
- â Elmo Motor ìì  ì íë¦¬ì¼ì´ì

#### Phase 4 Success Criteria
- Conanì íµí ì¬ë´ í¨í¤ì§ ë°°í¬
- Conanì íµí ë¼ì´ë¸ë¬ë¦¬ ë¤ì´ë¡ë ì±ê³µ
- Linux (WSL)ìì ë¹ë ì±ê³µ
- Elmo Motor ì±ë¥ ìêµ¬ì¬í­ ì¶©ì¡±
- ë¤ì¤ Elmo Motor ëì ì ì´ ì±ê³µ

### 14.5 Phase 5: GUI Architecture and Communication
**ëª©í**: MVC ìí¤íì² ê¸°ë° GUI ë¶ë¦¬ ë° FastDDS íµì  êµ¬í

#### Phase 5 Requirements
- **REQ-051 to REQ-067**: GUI ìí¤íì² ë° Elmo ëìë³´ë êµ¬í
- **REQ-072 to REQ-075**: GUI íµì  ì±ë¥ ìêµ¬ì¬í­

#### Phase 5 Deliverables
- â MVC ìí¤íì² êµ¬í
- â FastDDS íµì  ë ì´ì´
- â Elmo ëìë³´ë GUI
- â Motor Status Panel
- â Network Topology Display
- â Motor Control Interface
- â Alarm and Error Display
- â Configuration Panel

#### Phase 5 Success Criteria
- GUIì Core ìì¤í ìì  ë¶ë¦¬
- FastDDSë¥¼ íµí ì¤ìê° íµì  ì±ê³µ
- Elmo ëìë³´ë ì¤ìê° ëª¨ëí°ë§
- ë¤ì¤ GUI í´ë¼ì´ì¸í¸ ì§ì

### 14.6 Phase 6: Virtual Ethernet Architecture
**ëª©í**: 2ê° ì¤ííì¼ë¡ ë¶ë¦¬ (ê°ì ì´ëë·)

#### Phase 6 Requirements
- ë§ì¤í°ì ì¬ë ì´ë¸ ì¤ííì¼ ë¶ë¦¬
- ê°ì ì´ëë· íµì  êµ¬í
- íë¡ì¸ì¤ ê° EtherCAT íë ì ì ì¡

#### Phase 6 Deliverables
- â Master Executable (EtherCAT ë§ì¤í°)
- â Slave Executable (EtherCAT ì¬ë ì´ë¸ ìë®¬ë ì´ì)
- â Virtual Ethernet íµì  ë ì´ì´
- â ë¶ì° ìí¤íì² ìì 

#### Phase 6 Success Criteria
- ë§ì¤í°ì ì¬ë ì´ë¸ ì¤ííì¼ ë¶ë¦¬ ì±ê³µ
- ê°ì ì´ëë·ì íµí íµì  ì±ê³µ
- ë¶ì° ìí¤íì² ìë®¬ë ì´ì ëì

### 14.7 Phase 7: Separate Device Architecture
**ëª©í**: ë³ë ëë°ì´ì¤ë¡ ë§ì¤í°ì ì¬ë ì´ë¸ ë¶ë¦¬

#### Phase 7 Requirements
- ì ì© ë§ì¤í° ëë°ì´ì¤ ê°ë°
- ì ì© ì¬ë ì´ë¸ ëë°ì´ì¤ ê°ë°
- ì¤ì  ì´ëë· ë¤í¸ìí¬ íµì 

#### Phase 7 Deliverables
- â Master Device (ì ì© íëì¨ì´)
- â Slave Device (ì ì© íëì¨ì´)
- â Real Ethernet íµì 
- â ì°ìì© íì¨ì´

#### Phase 7 Success Criteria
- ë³ë ëë°ì´ì¤ìì ë§ì¤í°/ì¬ë ì´ë¸ ëì
- ì¤ì  ì´ëë· ë¤í¸ìí¬ íµì  ì±ê³µ
- ì°ì íê²½ìì ìì ì  ëì

### 14.8 Phase 8: Production Ready
**ëª©í**: íë¡ëì ë°°í¬ ì¤ë¹

#### Phase 8 Requirements
- **REQ-092 to REQ-099**: ë°°í¬ ë° ì¤ì¹
- ëª¨ë  ì´ì  ìêµ¬ì¬í­ ê²ì¦
- Conanì íµí KickCAT ë¼ì´ë¸ë¬ë¦¬ ë°°í¬

#### Phase 8 Deliverables
- â ìì í ì¬ë´ í¨í¤ì§ ë°°í¬ ìì¤í
- â Conanì íµí KickCAT ë¼ì´ë¸ë¬ë¦¬ ë¤ì´ë¡ë ì ê³µ
- â Conan ì¤ì¹ ë° ì¬ì© ê°ì´ë
- â ìì  ì íë¦¬ì¼ì´ì (ë¨ì¼ ì¤ííì¼)
- â ë¬¸ì  í´ê²° ê°ì´ë
- â ì±ë¥ ë²¤ì¹ë§í¬

#### Phase 8 Success Criteria
- Linux (WSL) íê²½ìì ìì ì  ëì
- Conanì íµí KickCAT ë¼ì´ë¸ë¬ë¦¬ ë¤ì´ë¡ë ë° ì¬ì© ê°ë¥
- ìì í ë¬¸ìí
- ì¬ë´ ì¬ì©ì í¼ëë°± ìì© ê°ë¥

---

## 15. Development Planning

### ê°ë° ë¨ê³ë³ ê³í

| Phase | ì£¼ì ë§ì¼ì¤í¤ | ìì¡´ì± |
|-------|---------------|--------|
| Phase 1 | ê¸°ë³¸ ë¼ì´ë¸ë¬ë¦¬ êµ¬ì¡° | ìì |
| Phase 2 | ìë®¬ë ì´ì íê²½ | Phase 1 ìë£ |
| Phase 3 | ì¤ìê° ì´ì | Phase 1,2 ìë£ |
| Phase 4 | ê³ ê¸ ê¸°ë¥ | Phase 1,2,3 ìë£ |
| Phase 5 | GUI ìí¤íì² ë° íµì  | Phase 4 ìë£ |
| Phase 6 | ê°ì ì´ëë· ìí¤íì² | Phase 5 ìë£ |
| Phase 7 | ë³ë ëë°ì´ì¤ ìí¤íì² | Phase 6 ìë£ |
| Phase 8 | íë¡ëì ì¤ë¹ (Conan ë¼ì´ë¸ë¬ë¦¬) | ëª¨ë  Phase ìë£ |

### ë³ë ¬ ê°ë° ê°ë¥ ìì­
- **ë¬¸ìí**: Phase 2ë¶í° ë³ë ¬ ì§í ê°ë¥
- **íì¤í¸**: ê° Phaseì ë³ë ¬ ì§í
- **ìì  ì½ë**: Phase 3ë¶í° ë³ë ¬ ì§í ê°ë¥

---

## 16. Risk Mitigation by Phase

### Phase 1 Risks
- **ê¸°ì ì  ë³µì¡ì±**: EtherCAT íë¡í ì½ ì´í´ ë¶ì¡±
- **ìíì±**: íë¡í íì ê°ë°, ì ë¬¸ê° ìë¬¸

### Phase 2 Risks
- **ì¤ë ë ëê¸°í**: ê²½ì ìí ë° ë°ëë½
- **ìíì±**: ì² ì í ì½ë ë¦¬ë·°, ëìì± íì¤í¸

### Phase 3 Risks
- **ì¤ìê° ì±ë¥**: 1ms ì¬ì´í´ íì ë¬ì± ì´ë ¤ì
- **ìíì±**: ì±ë¥ íë¡íì¼ë§, ìµì í

### Phase 4 Risks
- **í¬ë¡ì¤ íë«í¼**: íë«í¼ë³ ì°¨ì´ì 
- **ìíì±**: CI/CD íì´íë¼ì¸, ìëíë íì¤í¸

### Phase 5 Risks
- **ì¬ì©ì ì±í**: ë³µì¡í íµí© ê³¼ì 
- **ìíì±**: ìì¸í ë¬¸ìí, ìì  ì ê³µ

---

## 17. Deployment Architecture Evolution

### 17.1 Phase 1: Single Executable (ì´ê¸° ë¨ê³)
- **ëª©í**: ë¨ì¼ ì¤ííì¼ë¡ KickCAT ë¼ì´ë¸ë¬ë¦¬ ì¬ì©
- **êµ¬í**: Conanì íµí´ KickCAT ë¼ì´ë¸ë¬ë¦¬ ë¤ì´ë¡ë ë° íµí©
- **í¹ì§**: ë§ì¤í°ì ì¬ë ì´ë¸ê° ê°ì íë¡ì¸ì¤ìì ì¤í
- **ì©ë**: ê°ë° ë° íì¤í¸, ë¨ìí EtherCAT ì íë¦¬ì¼ì´ì
- **ì¬ì©ë²**: `conan install kickcat/1.0.0@company/stable` ëªë ¹ì¼ë¡ ë¼ì´ë¸ë¬ë¦¬ ë¤ì´ë¡ë
- **ë¼ì´ë¸ë¬ë¦¬ ìì¹**: ì¤ì¹ í `lib/libkickcat.a` ëë `lib/libkickcat.so` íì¼ ì¬ì©
- **íë«í¼**: Linux (WSL) íê²½ìì ì¤í

### 17.2 Phase 2: Virtual Ethernet (ì¤ê¸° ë¨ê³)
- **ëª©í**: 2ê°ì ì¤ííì¼ë¡ ë¶ë¦¬ (ê°ì ì´ëë· íµì )
- **êµ¬í**: 
  - Master Executable: EtherCAT ë§ì¤í° ê¸°ë¥ (Conanì¼ë¡ ë¤ì´ë¡ë)
  - Slave Executable: EtherCAT ì¬ë ì´ë¸ ìë®¬ë ì´ì (Conanì¼ë¡ ë¤ì´ë¡ë)
  - Virtual Ethernet: íë¡ì¸ì¤ ê° íµì 
- **í¹ì§**: ë¤í¸ìí¬ ìë®¬ë ì´ìì íµí ë¶ì° ìí¤íì²
- **ì©ë**: ë¤í¸ìí¬ íì¤í¸, ë¶ì° ìì¤í ê°ë°
- **ì¬ì©ë²**: ê°ê° ë³ëì Conan í¨í¤ì§ë¡ ë¤ì´ë¡ëíì¬ ì¬ì©

### 17.3 Phase 3: Separate Devices (ì¥ê¸° ë¨ê³)
- **ëª©í**: ë³ëì ëë°ì´ì¤ë¡ ë§ì¤í°ì ì¬ë ì´ë¸ ë¶ë¦¬
- **êµ¬í**:
  - Master Device: ì ì© EtherCAT ë§ì¤í° íëì¨ì´ (Conanì¼ë¡ íì¨ì´ ë¤ì´ë¡ë)
  - Slave Device: ì ì© EtherCAT ì¬ë ì´ë¸ íëì¨ì´ (Conanì¼ë¡ íì¨ì´ ë¤ì´ë¡ë)
  - Real Ethernet: ì¤ì  ì´ëë· ë¤í¸ìí¬ íµì 
- **í¹ì§**: ì¤ì  ì°ì íê²½ê³¼ ëì¼í ë¶ì° ìí¤íì²
- **ì©ë**: íë¡ëì íê²½, ì¤ì  ì°ì ìëí ìì¤í
- **ì¬ì©ë²**: ëë°ì´ì¤ë³ Conan í¨í¤ì§ë¡ íì¨ì´ ë¤ì´ë¡ë ë° ì¤ì¹

### 17.4 Conan Integration Strategy
- **Phase 1**: KickCAT ë¼ì´ë¸ë¬ë¦¬ë¥¼ Conan í¨í¤ì§ë¡ ì ê³µíì¬ ë¤ì´ë¡ë ê°ë¥
- **Phase 2**: Master/Slave ì»´í¬ëí¸ë¥¼ ë³ë Conan í¨í¤ì§ë¡ ë¶ë¦¬íì¬ ê°ë³ ë¤ì´ë¡ë
- **Phase 3**: ëë°ì´ì¤ë³ Conan í¨í¤ì§ ë° íì¨ì´ ì§ì
- **ì¬ì© ë°©ì**: ê°ë°ìë Conanì íµí´ KickCAT ë¼ì´ë¸ë¬ë¦¬ë¥¼ ë¤ì´ë¡ëíì¬ Linux íë¡ì í¸ì íµí©
- **ë¼ì´ë¸ë¬ë¦¬ ìì¹**: Conan ì¤ì¹ í lib/ ëë í ë¦¬ì libkickcat.a, libkickcat.soê° ì¤ì¹ë¨
- **í¨í¤ì§ êµ¬ì¡°**: Conan í¨í¤ì§ ë´ë¶ì include/, lib/, bin/ ëë í ë¦¬ êµ¬ì¡° ì ê³µ
- **íë«í¼**: Linux (WSL) íê²½ì ìµì í

---

*This PRD serves as the foundation for the KickCAT EtherCAT Master Library development and will be updated as requirements evolve.*